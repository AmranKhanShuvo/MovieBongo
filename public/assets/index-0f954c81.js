import{D as b,r as t,o as y,bd as w,be as H,x as f,y as d,z as l,p as a,R as S,q as s}from"./index-06ab806b.js";import{b as k}from"./movies-04e7ef00.js";import{h as i}from"./moment-fbc5633a.js";import{b as C}from"./shows-50cef478.js";const j=()=>{const v=new URLSearchParams(window.location.search).get("date"),{user:n}=b(e=>e.user),[h,x]=t.useState(),[r,g]=t.useState(),[o,N]=t.useState(v||i().format("YYYY-MM-DD")),c=y(),{movieId:u}=w(),p=H(),D=t.useCallback(async()=>{try{c(f());const e=await k({id:u});c(d()),e.success?g(e.movie):l.error(e.message)}catch(e){c(d()),l.error(e.message)}},[]),M=t.useCallback(async()=>{try{c(f());const e=await C({date:o,id:u});c(d()),e.success?x(e.data):l.error(e.message)}catch(e){c(d()),l.error(e.message)}},[o]);return t.useEffect(()=>{D()},[]),t.useEffect(()=>{M()},[o]),a(S.Fragment,{children:r&&s("div",{children:[s("div",{className:"flex justify-between items-center mb-2",children:[s("div",{children:[s("h1",{className:"text-2xl uppercase mb-1",children:[r.title," (",r.language,")"]}),s("h1",{className:"text-md",children:["Duration : ",r.duration," mins"]}),s("h1",{className:"text-md",children:["Release Date : ",i(r.releaseDate).format("MMM Do YYYY")]}),s("h1",{className:"text-md",children:["Genre : ",r.genre]})]}),s("div",{className:"center",children:[a("h1",{className:"text-md mb-1",children:"Select Date:"}),a("input",{type:"date",min:i().format("YYYY-MM-DD"),value:o,onChange:e=>{N(e.target.value),p(`/movie/${u}?date=${e.target.value}`)}})]})]}),a("hr",{}),a("div",{children:a("h1",{className:"text-xl uppercase mt-2",children:"Theatres"})}),a("div",{className:"mt-1 flex flex-col gap-1",children:h==null?void 0:h.filter(e=>e.owner!==(n==null?void 0:n._id)).map(e=>s("div",{className:"card p-2",children:[a("h1",{className:"text-md uppercase",children:e.name}),s("h1",{className:"text-sm",children:["Address: ",e.address]}),a("div",{className:"divider"}),a("div",{className:"flex gap-2",children:e.shows.sort((m,Y)=>i(m.time,"HH:mm").valueOf()-i(Y.time,"HH:mm").valueOf()).map(m=>a("div",{className:"card p-1 cursor-pointer",onClick:()=>p(`/book-show/${m._id}`),children:a("h1",{className:"text-sm",children:i(m.time,"HH:mm").format("hh:mm A")})},m._id))})]},e._id))})]})})};export{j as default};
