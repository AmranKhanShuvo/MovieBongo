import{H as m,u as h,a as d,r as g,j as s,R as p,b as i,s as f,bh as u,h as c,bi as x,m as l}from"./index-8bc6b7eb.js";const N=({children:n})=>{const{user:e}=m(o=>o.user),t=h(),a=d();return g.useEffect(()=>{localStorage.getItem("token")?(async()=>{try{t(f());const r=await u();t(c()),r.success?t(x(r.userData)):(localStorage.removeItem("token"),l.error(r.message),a("/login"))}catch(r){t(c()),l.error(r.message)}})():a("/login")},[a,t]),s(p.Fragment,{children:e&&i("div",{className:"layout p-1",children:[i("div",{className:"header bg-primary flex justify-between p-2",children:[s("div",{children:s("h1",{className:"text-2xl text-white cursor-pointer",onClick:()=>a("/"),children:"MovieBongo"})}),i("div",{className:"bg-white p-1 flex gap-1",children:[s("i",{className:"ri-shield-check-fill text-primary"}),s("h1",{className:"text-sm underline",onClick:()=>{e!=null&&e.isAdmin?a("/admin"):a("/profile")},children:e==null?void 0:e.name}),s("i",{className:"ri-logout-box-r-line ml-2 text-primary",onClick:()=>{localStorage.removeItem("token"),a("/login")}})]})]}),s("div",{className:"content mt-1 p-1",children:n})]})})};export{N as default};
