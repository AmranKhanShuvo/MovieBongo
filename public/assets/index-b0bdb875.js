import{H as b,r as t,u as w,bg as y,a as H,s as p,h as d,m as l,j as a,R as S,b as s}from"./index-8bc6b7eb.js";import{b as k}from"./movies-4b656299.js";import{h as i}from"./moment-fbc5633a.js";import{b as j}from"./shows-c2c0e33c.js";const _=()=>{const v=new URLSearchParams(window.location.search).get("date"),{user:n}=b(e=>e.user),[h,g]=t.useState(),[r,x]=t.useState(),[o,N]=t.useState(v||i().format("YYYY-MM-DD")),c=w(),{movieId:u}=y(),f=H(),D=t.useCallback(async()=>{try{c(p());const e=await k({id:u});c(d()),e.success?x(e.movie):l.error(e.message)}catch(e){c(d()),l.error(e.message)}},[]),M=t.useCallback(async()=>{try{c(p());const e=await j({date:o,id:u});c(d()),e.success?g(e.data):l.error(e.message)}catch(e){c(d()),l.error(e.message)}},[o]);return t.useEffect(()=>{D()},[]),t.useEffect(()=>{M()},[o]),a(S.Fragment,{children:r&&s("div",{children:[s("div",{className:"flex justify-between items-center mb-2",children:[s("div",{children:[s("h1",{className:"text-2xl uppercase mb-1",children:[r.title," (",r.language,")"]}),s("h1",{className:"text-md",children:["Duration : ",r.duration," mins"]}),s("h1",{className:"text-md",children:["Release Date : ",i(r.releaseDate).format("MMM Do YYYY")]}),s("h1",{className:"text-md",children:["Genre : ",r.genre]})]}),s("div",{className:"center",children:[a("h1",{className:"text-md mb-1",children:"Select Date:"}),a("input",{type:"date",min:i().format("YYYY-MM-DD"),value:o,onChange:e=>{N(e.target.value),f(`/movie/${u}?date=${e.target.value}`)}})]})]}),a("hr",{}),a("div",{children:a("h1",{className:"text-xl uppercase mt-2",children:"Theatres"})}),a("div",{className:"mt-1 flex flex-col gap-1",children:h==null?void 0:h.filter(e=>e.owner!==(n==null?void 0:n._id)).map(e=>s("div",{className:"card p-2",children:[a("h1",{className:"text-md uppercase",children:e.name}),s("h1",{className:"text-sm",children:["Address: ",e.address]}),a("div",{className:"divider"}),a("div",{className:"flex gap-2",children:e.shows.sort((m,Y)=>i(m.time,"HH:mm").valueOf()-i(Y.time,"HH:mm").valueOf()).map(m=>a("div",{className:"card p-1 cursor-pointer",onClick:()=>f(`/book-show/${m._id}`),children:a("h1",{className:"text-sm",children:i(m.time,"HH:mm").format("hh:mm A")})},m._id))})]},e._id))})]})})};export{_ as default};
